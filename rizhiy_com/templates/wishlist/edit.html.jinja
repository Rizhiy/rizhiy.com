{% extends "base.html.jinja" %}
{% block head %}
    {{ super() }}
    <link rel="stylesheet" href="{{ url_for('static', filename='form.css') }}">
    <link rel="stylesheet"
          href="{{ url_for('static', filename='wishlist.css') }}">
{% endblock %}
{% block title %}Edit Wish{% endblock %}
{% block content %}
    <form method="post" class="wish-form">
        <label for="title">Title</label>
        <input type="text"
               name="title"
               id="title"
               placeholder="A wish"
               value="{{ wish['title'] }}"
               required />
        <label for="desc">Description</label>
        <textarea name="desc" id="desc" placeholder="Describe your wish...">{{ wish['desc'] }}</textarea>
        <label for="rough_price">Price</label>
        <div class="price-container">
            <input type="text"
                   name="rough_price"
                   id="rough_price"
                   placeholder="0.00"
                   value="{{ wish['rough_price'] }}" />
            <input type="text"
                   name="currency"
                   id="currency"
                   placeholder="USD"
                   value="{{ wish['currency'] }}" />
        </div>
        <label for="picture_url">Picture URL</label>
        <div class="picture-container">
            <input type="text"
                   name="picture_url"
                   id="picture_url"
                   placeholder="https://example.com/image.jpg"
                   value="{{ wish['picture_url'] }}" />
            {% if wish['picture_url'] %}
                <div class="image-preview">
                    <img src="{{ wish['picture_url'] }}" alt="Image preview" />
                </div>
            {% endif %}
        </div>
        <label for="reserved_by">Reserved By</label>
        <select name="reserved_by" id="reserved_by">
            <option value="">No one</option>
            {% for user in users %}
                <option value="{{ user['username'] }}"
                        {% if reserved_by_user == user['username'] %}selected{% endif %}>
                    {{ user['username'] }}
                </option>
            {% endfor %}
        </select>
        <label for="links">Links</label>
        <div id="links-container">
            {% for link in wish['links'] %}
                <div class="link-item">
                    <input type="text"
                           name="link_urls"
                           value="{{ link['url'] }}"
                           placeholder="Link URL" />
                    <input type="text"
                           name="link_descs"
                           value="{{ link['desc'] }}"
                           placeholder="Link Description" />
                </div>
            {% endfor %}
        </div>
        <button type="button" onclick="addLinkField()">Add another link</button>
        <textarea name="links" id="links" style="display:none;">{% for link in wish['links'] %}{{ link['url'] }}\n{% endfor %}</textarea>
        <input type="submit" value="Save Changes" />
    </form>
{% endblock %}
